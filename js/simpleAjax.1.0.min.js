function CKEditorUpdate(){for(instance in CKEDITOR.instances)CKEDITOR.instances[instance].updateElement()}!function($){$.fn.simpleAjax=function(options){$element=this,$element.call_ajax=function(a,b,c,d,e,f){$.isFunction(window[f])&&(f=window[f]),$.ajax({type:a,url:c,data:d,dataType:b,success:function(a){a=JSON.stringify(a),f(a,e)}})},$element.click=function(a){a&&(a.removeAttr("disabled"),$(".clicked").fadeOut(function(){$(".clicked").remove()}))},$element.ajaxForm=function(){this.on("submit","form[ajax-callback]",function(a){a.preventDefault(),$(".clicked").remove();var b=$(this),c=button_clicked(b),d=c.element,e=c.param,f=callback_function(b);use_ckeditor(b);var g=data_type(b),h=b.attr("action"),i=method(b),j=b.serialize();return j+=e,$element.call_ajax(i,g,h,j,d,f),!1})},$element.ajaxLink=function(){this.on("click","a[ajax-callback]",function(a){if(a.preventDefault(),$(".clicked").remove(),$(a.target).is("a[disabled]"))return!1;var b=$(this);b.attr("disabled",!0),ajax_loader(b);var c=b.attr("href"),d=callback_function(b),e=method(b),f=data_type(b),g=ajax_data(b);return $element.call_ajax(e,f,c,g,b,d),!1})};var callback_function=function(a){var b="";if(a.attr("ajax-callback")){var b=window[a.attr("ajax-callback")];return b}return!1},use_ckeditor=function(a){return a.attr("ajax-ckeditor")&&CKEditorUpdate(),!1},button_clicked=function(a){var b,c,d,e={};return b=a.find("input[type=submit]:focus, button[type=submit]:focus"),b.prop("disabled",!0),a.attr("ajax-loader")&&(d=a.attr("ajax-loader"),b.attr("ajax-loader",d)),b.val()?c=b.val():b.html()&&(c=b.html(),ajax_loader(b)),e.element=b,e.param="&"+b.attr("name")+"="+c,e},data_type=function(a){var b="json";return a.attr("ajax-type")&&(b=a.attr("ajax-type")),b},ajax_data=function(a){var b="json";return a.attr("ajax-data")&&(b=a.attr("ajax-data")),b},ajax_loader=function(a){var b=a.attr("ajax-loader");"true"==b&&a.append("<span class='clicked'>&nbsp; <i class='fa fa-circle-o-notch fa-spin fa-fw'></i></span>")},method=function(a){var b="get";return a.attr("ajax-method")?b=a.attr("ajax-method"):a.attr("method")&&(b=a.attr("method")),b};return $element.json_decode=function(response){return eval("("+response+")")},$element.initialize=function(){return $element.ajaxForm(),$element.ajaxLink(),$element},$element.initialize()}}(jQuery);